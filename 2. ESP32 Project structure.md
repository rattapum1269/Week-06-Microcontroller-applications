# ระบบการ Build สำหรับ ESP32 Project 

## โครงสร้าง Project สำหรับ Hardware Development

### Project Structure มาตรฐาน

```
my_esp32_project/
├── CMakeLists.txt              # Top-level CMake file
├── sdkconfig                   # Project configuration
├── sdkconfig.defaults          # Default configuration
├── partitions.csv             # Custom partition table (optional)
├── main/                       # Main application
│   ├── CMakeLists.txt         # Main component CMake
│   ├── main.c                 # Entry point
│   └── include/               # Private headers
│       └── main.h
├── components/                 # Custom components
│   └── hardware_driver/
│       ├── CMakeLists.txt
│       ├── hardware_driver.c
│       └── include/
│           └── hardware_driver.h
├── build/                      # Build output (auto-generated)
├── managed_components/         # Package manager components
├── dependencies.lock          # Dependency lock file
└── docs/                       # Documentation
    └── README.md
```

### 🗂️ Minimal Files - ไฟล์น้อยที่สุดที่ทำให้ Project ทำงานได้

สำหรับ ESP32 project ที่ทำงานได้ขั้นต่ำ จำเป็นต้องมีเพียง **3 ไฟล์หลัก**:

```
minimal_esp32_project/
├── CMakeLists.txt              # ✅ จำเป็น - ไฟล์ configuration หลัก
└── main/
    ├── CMakeLists.txt          # ✅ จำเป็น - component configuration  
    └── main.c                  # ✅ จำเป็น - entry point ของโปรแกรม
```

#### 📄 ไฟล์ที่ 1: `CMakeLists.txt` (Top-level)
```cmake
cmake_minimum_required(VERSION 3.16)
include($ENV{IDF_PATH}/tools/cmake/project.cmake)
project(minimal_project)
```

#### 📄 ไฟล์ที่ 2: `main/CMakeLists.txt`
```cmake
idf_component_register(SRCS "main.c")
```

#### 📄 ไฟล์ที่ 3: `main/main.c`
```c
#include <stdio.h>
#include "freertos/FreeRTOS.h"
#include "freertos/task.h"

void app_main(void)
{
    printf("Hello ESP32!\n");
    while(1) {
        vTaskDelay(1000 / portTICK_PERIOD_MS);
    }
}
```

#### 🚀 การ Build และ Flash
```bash
idf.py build
idf.py -p <COM3> flash monitor

# หรือในกรณีที่ใช้ QEMU
idf.py qemu
```

**หมายเหตุ**: ไฟล์ `sdkconfig` จะถูกสร้างขึ้นอัตโนมัติเมื่อ build ครั้งแรก และโฟลเดอร์ `build/` จะถูกสร้างระหว่างกระบวนการ compilation

## 📖 รายละเอียดเพิ่มเติม

สำหรับข้อมูลรายละเอียดเกี่ยวกับไฟล์สำคัญในระบบ Build, การจัดการ Hardware Components, การ Configuration, และ Best Practices สำหรับ Hardware Development โปรดดูที่:

**[📋 อ้างอิง: ไฟล์และการตั้งค่าสำหรับ Hardware Development](ref1.md)**

---
